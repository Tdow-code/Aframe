Analyzing the conditional logic, focusing on warnings and key values. Reviewing validation and key value checks:

Conditional Logic & Validation System - Write-up

Constants & Thresholds

MAX_WEIGHT_PER_SIDE_DEFAULT = 3600 lbs
MAX_CM_PER_SIDE_DEFAULT = 14 cm
MAX_IMBALANCE_THRESHOLD = 1500 lbs (default)
MAX_SLABS_PER_SIDE = 14 slabs
SQ_FT_RESTRICTION_VALUE = 47 // The sq/ft threshold


Truck-Specific Overrides:

Metal Aframe Truck: maxImbalance: 4500 lbs (overrides default threshold)

Other trucks use the default MAX_IMBALANCE_THRESHOLD of 1500 lbs

Validation Warnings & Errors

1. Frame Overload Error (Lines 1142-1144)

Trigger: Total frame weight exceeds the frame's maximum weight limit

if (totalWeight > maxFrameWeight)


Type: error (red notification)

Message: "Frame {name} OVERLOADED! {totalWeight}lbs > {maxFrameWeight}lbs limit."

Key Values:

totalWeight = sum of driver + passenger side weights

maxFrameWeight = frame's maxWeight property (default: 7200 lbs)

2. Width/CM Exceeded Warning (Lines 1146-1148)

Trigger: Total thickness (CM) on one side exceeds the allowed maximum

if (totalCm > maxCm)


Type: warning (orange notification)

Message: "Width Exceeded: {side} side is {totalCm}cm, exceeding {maxCm}cm limit."

Key Values:

totalCm = sum of slab thicknesses (in cm) on one side

maxCm = side's maxCm property (default: 14 cm)

3. Imbalanced Warning (Lines 1150-1153)

Trigger: Weight difference between the driver and passenger side exceeds the imbalance threshold

if (Math.abs(driverWeight - passengerWeight) > maxImbalanceThreshold)


Type: warning (orange notification)

Message: "IMBALANCED: Difference is {diff}lbs, exceeding {maxImbalanceThreshold}lbs threshold."

Key Values:

diff = |driverWeight - passengerWeight|

maxImbalanceThreshold = 1500 lbs (default) or 4500 lbs (Metal Aframe Truck)

4. Customer Restriction Error (Lines 1155-1157, Logic: ~Lines 710-720)

Trigger: A slab belonging to a "Back-Only" customer is placed on the front frame (Frame 1).

if (frame.id === 1 && customerIsBackOnly)


Type: error (red notification)

Message: "Restriction Violation: Back-only customer placed on front frame."

Logic: Customer is "Back-Only" if their profile contains any of these in special or notes:

const customerIsBackOnly = special.includes('back') || special.includes('rear') || 
                special.includes('outside') || special.includes('gate') || 
                notes.toLowerCase().includes('back');


Visual: Red background (bg-red-50) and red text (text-red-700)

Key Values:

special field contains: "call", "back", "outside", "gate"

notes field contains: "back"

5. SQ/FT Slab Violation Error (NEW)

Trigger: A slab with a size greater than the SQ_FT_RESTRICTION_VALUE (e.g., a "large slab") is placed on top of a slab that is designated as a restricted sq/ft slab (slab.isSqFt). This is a stacking safety rule.

const hasSqFtSlabs = sideSlabs.some(s => s.isSqFt);
const hasSlabsAboveSqFt = sideSlabs.slice(1).some(s => s.height > SQ_FT_RESTRICTION_VALUE); // Using slab.height as the sq/ft value
if (hasSqFtSlabs && hasSlabsAboveSqFt)


Type: error (red notification)

Message: "SQ/FT Slab Violation: Cannot place slabs > {SQ_FT_RESTRICTION_VALUE}sq/ft on top of a base sq/ft slab."

Visual Indicator: Restricted sq/ft slabs are highlighted in light green with a green border (status-sqft class) and display a [SQ/FT] badge.

Key Value: slab.isSqFt (Boolean flag set during import) and slab.height (used to check if a stacked slab is > SQ_FT_RESTRICTION_VALUE sq/ft).

Slab Status Detection (Lines 737-738)

Condition: Inactive Slab Detection

const lotStatus = row['Lot Status'] || 'Active';
const isInactive = lotStatus.toUpperCase() !== 'ACTIVE';


Key Value: 'Lot Status' column from CSV

Logic: Any value other than "ACTIVE" (case-insensitive) = inactive

Visual: Yellow highlight with orange border (status-inactive class)

Summary of Key Values to Monitor

Customer Profile Fields:

special: "back", "rear", "call", "outside", "gate"

notes: "back"

CSV Load Report Fields:

Lot Status: "ACTIVE" vs. anything else

Stop Number: Must be numeric and > 0

Slab Height: Used to enforce the SQ/FT Slab Violation rule (now represents sq/ft).

Frame Limits:

maxWeight: Per-frame weight limit

maxCm: Per-side thickness limit (default: 14 cm)

maxImbalance: Per-truck weight difference limit